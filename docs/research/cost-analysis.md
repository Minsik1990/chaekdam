# 비용 분석 (완전 무료 운영 전략)

> 최종 업데이트: 2026-02-07 (v1.0)

---

## 1. 무료 플랜 한도 요약

### Supabase Free Tier
| 항목 | 한도 | 비고 |
|------|------|------|
| Database | 500MB | PostgreSQL |
| Storage | 1GB | 파일 저장소 |
| Auth | 50,000 MAU | 소셜 로그인 포함 |
| Edge Functions | 500K 호출/월 | Deno 런타임 |
| Egress | 2GB/월 | 네트워크 전송량 |
| Realtime | 200 동시 접속 | WebSocket |

**주의**: 7일 비활성 시 자동 일시정지 → GitHub Actions cron으로 방지 필수

### Vercel Hobby Plan
| 항목 | 한도 | 비고 |
|------|------|------|
| 대역폭 | 100GB/월 | |
| Serverless 호출 | 150K/월 | API Routes |
| 빌드 시간 | 6,000분/월 | |
| 프로젝트 수 | 무제한 | |
| 도메인 | .vercel.app 무료 | 커스텀 도메인 가능 |

**주의**: 비상업적(personal, non-commercial) 용도만 허용

### GitHub Actions
| 항목 | 한도 | 비고 |
|------|------|------|
| Private 레포 | 2,000분/월 | |
| **Public 레포** | **무제한** | 핵심 전략 |

---

## 2. LLM 비용 전략

### Claude API (메인)
| 모델 | Input | Output | 용도 |
|------|-------|--------|------|
| **Haiku 4.5** | $1/1M tokens | $5/1M tokens | 일상 대화, 간단한 질문 |
| **Sonnet 4.5** | $3/1M tokens | $15/1M tokens | 심층 분석, 발제문 생성 |

### 비용 최적화 전략
1. **Prompt Caching**: 동일 책 반복 대화 시 90% 비용 절감
2. **AI 응답 DB 캐싱**: 자주 묻는 질문/요약은 Supabase에 저장하여 재사용
3. **모델 라우팅**: 간단한 질문 → Haiku, 심층 분석 → Sonnet

### 예상 월 비용 (10명 모임 기준)
- Haiku 일상 대화: ~$1~2/월
- Sonnet 심층 분석: ~$1~3/월 (필요 시만)
- **합계: $2~5/월 (약 3,000~7,000원)**

### 무료 대안 (백업)
| 옵션 | 무료 한도 | 한국어 성능 | 추천도 |
|------|----------|-----------|-------|
| **Google Gemini Flash-Lite** | 1,000 RPD, 250K TPM | 우수 | 최고 |
| **OpenRouter 무료 모델** | 50 RPD (미구매) | 모델별 상이 | 좋음 |
| **Groq** | 무료 티어 | 보통 | 보통 |

---

## 3. 이미지/미디어 저장 전략

| 용도 | 추천 솔루션 | 이유 |
|------|-----------|------|
| 모임 사진 | **Cloudflare R2** (10GB 무료, Egress 무료) | Supabase Storage 1GB보다 10배 넉넉 |
| 책 표지 | 도서 API URL 직접 사용 | Storage 불필요, 비용 0 |
| 영상 | YouTube 임베딩 | 호스팅 비용 0 |

---

## 4. 총 비용 시뮬레이션

| 규모 | 인프라 비용 | LLM 비용 | 총 월 비용 | 비고 |
|------|-----------|---------|----------|------|
| **10명** | **0원** | ~5,000원 | **~5,000원** | 모든 무료 한도 내 |
| **30~40명** | **0원** | ~10,000원 | **~10,000원** | 무료 인프라 최대 규모 |
| **50명** | ~1,200원 | ~15,000원 | **~16,200원** | 커스텀 도메인 비용 추가 |
| **100명** | ~26,200원 | ~25,000원 | **~51,200원** | Vercel Pro 필요 |

---

## 5. 무료 운영 필수 조건 체크리스트

- [ ] **Supabase 일시정지 방지**: GitHub Actions cron job (3일마다 DB ping)
- [ ] **Public GitHub 레포**: Actions 무제한 사용
- [ ] **.vercel.app 도메인** 사용 (커스텀 도메인 비용 절감)
- [ ] **도서 API 결과 DB 캐싱**: Rate Limit 회피 + API 호출 절약
- [ ] **AI 응답 캐싱**: 반복 질문 DB 저장으로 LLM 비용 절감
- [ ] **Prompt Caching 활용**: 책 정보 캐시로 토큰 절약
- [ ] **이미지 최적화**: 업로드 시 리사이즈 + WebP 변환
- [ ] **Cloudflare R2**: 사진 저장은 Supabase Storage 대신 R2 사용

---

## 6. 비용 모니터링 포인트

| 서비스 | 모니터링 항목 | 위험 신호 |
|--------|------------|----------|
| Supabase | DB 용량, Storage 사용량, Auth MAU | DB 400MB 초과 시 정리 필요 |
| Vercel | 대역폭, Serverless 호출 수 | 80GB 대역폭 초과 시 최적화 |
| Claude API | 월간 토큰 사용량 | $10 초과 시 캐싱 강화 |
| Cloudflare R2 | Storage 사용량 | 8GB 초과 시 이미지 정리 |
